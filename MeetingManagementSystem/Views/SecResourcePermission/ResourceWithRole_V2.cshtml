
@{
    ViewBag.Title = "ResourceWithRole_V2";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>ResourceWithRole_V2</h2>
<link href="~/Content/bootstrap.css" rel="stylesheet" />
<script src="~/Scripts/bootstrap.js"></script>
<link href="~/Scripts/treeview/bootstrap-treeview.min.css" rel="stylesheet" />
<script src="~/Scripts/treeview/bootstrap-treeview.min.js"></script>
<script src="~/Scripts/lib/AjaxManager.js"></script>


<div class="row">
    <div id="testTree"></div>
</div>

<script type="text/javascript">

    var tree = [
        {
            text: "Parent 1",
            nodes: [
                {
                    text: "Child 1",
                    nodes: [
                        {
                            text: "Grandchild 1"
                        },
                        {
                            text: "Grandchild 2"
                        }
                    ]
                },
                {
                    text: "Child 2"
                }
            ]
        },
        {
            text: "Parent 2"
        },
        {
            text: "Parent 3"
        },
        {
            text: "Parent 4"
        },
        {
            text: "Parent 5"
        }
    ];

    function getTree() {
        // Some logic to retrieve, or generate tree structure
        return tree;
    }

    $(document).ready(function () {
        var jsonParam = '';
        var serviceURL = "/SecResourcePermission/GetData/";
        AjaxManager.SendJson(serviceURL, jsonParam, onSuccess, onFailed);
           
        function onSuccess(JsonData) {
            $('#testTree').treeview({
                data: JsonData,
                checkboxes: true
            });
        }
        function onFailed(xhr, status, err) {
            Message.Exception(xhr);
        }
        //$('#testTree').treeview({ data: getTree() });
    });

</script>